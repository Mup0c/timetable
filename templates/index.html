<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>I have paws</title>
     <style type="text/css">
        TABLE {
            border-collapse: collapse;
        }
        TD, TH {
            padding: 3px;
            border: 1px solid black;
        }
        TH {
            background: #b0e0e6;
        }
     </style>
  </head>
  <body>
     <form>
        <select name="t" onchange="this.form.submit()">
           {% for table in tables %}
              <option {% if selected_table.tableName==table %} selected {% endif %} >
                 {{ table }}
              </option>
           {% endfor %}
        </select>
        <br><br>
        {% for i in range(search.count) %}
           <select name={{'c' + i|string}}>
              {% for field in meta %}
                 <option {% if search.columns[i].colName==field.colName %} selected {% endif %} value="{{ field.colName }}">
                    {{ field.viewedName }}
                 </option>
              {% endfor %}
           </select>
           <select name={{'op' + i|string}}>
              {% for operator in operators %}
                 <option {% if search.operators[i]==operator %} selected {% endif %}>
                    {{ operator }}
                 </option>
              {% endfor %}
            </select>
           <input name={{'s' + i|string}} value="{{ search.requests[i] }}">
        <br><br>
        {% endfor %}
        <input type="submit" value="Найти">
        <input type="hidden" name="cnt" value="{{search.count}}">
        <input type="hidden" name="srt">
        <input type="hidden" name="page" value="{{paging.page}}">
        <input type="submit" value="Добавить" onclick="cnt.value={{search.count + 1}}">
        {% if search.count > 1 %}
        <input type="submit" value="Удалить" onclick="cnt.value={{search.count - 1}}">
        {% endif %}
        <br><br>
        <table>
           <thead>
              {% for field in meta %}
                 <th align="center">
                    <a href = {{ changeArg("srt", field.colName) }}>{{ field.viewedName }}</a>
                 </th>
              {% endfor %}
           </thead>
           {% for row in rows %}
              <tr>
              {% for element in row %}
                 <td align="center">
                    {{ element }}
                 </td>
              {% endfor %}
              <td align="center">
                 <a target="_blank" href = {{ getModifyPageUrl(selected_table.tableName,  row[0]) }}>Редактировать</a>
              </td>
              </tr>
           {% endfor %}
        </table>
        <br>
        <a>Строк на страницу: </a>
        <input type="number" name="onpage" min="1" max="10000" value={{ paging.OnPage }}>
        <br>
        <br>
        <a>Текущая страница: {{ paging.page + 1 }}</a>
        <br>
        <br>
        {% for page in range(paging.pagesNum) %}
           <a  href = {{ changeArg("page",  page ) }}>{{ page + 1 }}</a>
        {% endfor %}
     </form>
  </body>
</html>